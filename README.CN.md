[简体中文](./README.CN.md) | [English](./README.md)

# SMPTE ST 2095-1 粉红噪声生成器 (带图形界面)

这是一个用于生成符合 **SMPTE ST 2095-1** 标准的**带限粉红噪声**（Band-Limited Pink Noise）的工具。它包含一个核心算法脚本和一个用户友好的图形界面（GUI），专为音频工程师和声学校准设计。

## ⚙️ 开发环境与要求

- **Python 版本**: `3.12.3` (本项目在此版本下开发与测试)
- **依赖库**: 本项目仅使用 Python 标准库，无需安装第三方 pip 包。
  - `tkinter`: 用于图形界面 (通常随 Python 安装)
  - `math`, `struct`, `os`, `sys`, `subprocess`, `threading`: 核心标准库

## 📂 文件结构

请确保以下两个文件位于同一目录下：

1.  **`smpte_noise.py`**: 核心算法脚本（原始 SMPTE 代码）。
2.  **`gui_generator.py`**: 图形界面启动器（运行此文件）。

---

## 🧠 算法原理 (SMPTE ST 2095-1)

本工具遵循 **SMPTE ST 2095-1:2023** 标准。粉红噪声是一种每倍频程具有相等能量的随机信号（功率谱密度与频率成反比，$1/f$）。

### 核心实现细节：

1.  **伪随机数生成 (PRNG)**：
    使用线性同余生成器 (LCG) 产生高质量的白噪声作为源信号。

2.  **粉红滤波网络 (Pink Filter Network)**：
    将白噪声通过由 **6 个一阶低通滤波器** 组成的并行网络。这是对 Paul Kellet 优化算法的实现，能够极高精度地逼近理想的 $1/f$ 频谱特性。

3.  **带限滤波 (Band-Limiting)**：
    生成的宽带粉红噪声会经过精确的**双二阶 (Biquad) 滤波器**进行频带限制：

    - **高通滤波器 (HPF)**: 截止频率 10 Hz。
    - **低通滤波器 (LPF)**: 截止频率 22.4 kHz。
      这确保了信号能量集中在可听域内，且不受直流偏移或超高频干扰影响。

4.  **电平校准 (Level Calibration)**：
    算法自动调整增益，使输出信号的 RMS 电平精确对齐到标准规定的 **-18.5 dBFS(AES17)** (即 **-21.5 dBFS RMS**)。

---

## 🖥️ GUI 使用方法

### 运行步骤

1.  打开终端 (Terminal) 或命令提示符 (CMD)。
2.  运行 GUI 脚本：
    ```bash
    python gui_generator.py
    ```

### 界面功能说明

1.  **采样率 (Sample Rate)**:
    - 选择 `48 kHz` (影视标准) 或 `96 kHz` (高解析度)。
2.  **时长 (Duration)**:
    - 输入生成音频的长度（秒）。
3.  **声道数 (Channel Count)**:
    - 设置 WAV 文件的声道数量（例如：1 为单声道，2 为立体声）。所有声道将包含相同的噪声信号。
4.  **文件名 (Filename)**:
    - 输入输出文件的名称（程序会自动补全 `.wav` 后缀）。
5.  **输出目录 (Output Folder)**:
    - 点击 "Browse..." (浏览) 选择文件保存的位置。
6.  **生成音频 (Generate Audio)**:
    - 点击开始生成。生成过程中界面不会卡死。
7.  **打开输出目录 (Open Output Folder)**:
    - 生成成功后，此按钮将变亮，点击即可直接打开文件所在的文件夹。

### 结果验证

生成完成后，弹窗会显示实际计算出的 **RMS (dB)** 值，您可以以此验证信号是否符合标准电平。
